# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—É—Ä–Ω—ñ—Ä—É: –ó–º—ñ–Ω–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É—á–∞—Å–Ω–∏–∫—ñ–≤ —Ç–∞ —Ä–∞—É–Ω–¥—ñ–≤

## üìã –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ `total_participants` —Ç–∞ `total_rounds` –¥–ª—è —Ç—É—Ä–Ω—ñ—Ä—É, –∞–ª–µ **—Ç—ñ–ª—å–∫–∏ –ø–æ–∫–∏ —Ç—É—Ä–Ω—ñ—Ä –Ω–µ –ø–æ—á–∞–≤—Å—è** (—Å—Ç–∞—Ç—É—Å `registration`).

## üîê –î–æ—Å—Ç—É–ø
- –¢—ñ–ª—å–∫–∏ **—Å—Ç–≤–æ—Ä—é–≤–∞—á —Ç—É—Ä–Ω—ñ—Ä—É** –º–æ–∂–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏
- –ü–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (Bearer token)

## ‚úÖ –£–º–æ–≤–∏ –¥–ª—è –∑–º—ñ–Ω–∏

### –ó–º—ñ–Ω–∞ `total_participants`:
- ‚úÖ –¢—É—Ä–Ω—ñ—Ä –º–∞—î –±—É—Ç–∏ –≤ —Å—Ç–∞—Ç—É—Å—ñ `registration`
- ‚úÖ –ù–æ–≤–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–∞—î –±—É—Ç–∏ –∫—Ä–∞—Ç–Ω–∞ 8 (8, 16, 24, 32, ..., 128)
- ‚úÖ –ù–æ–≤–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–∞—î –±—É—Ç–∏ >= –ø–æ—Ç–æ—á–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤
- ‚ùå –ù–µ –º–æ–∂–Ω–∞ –∑–º–µ–Ω—à–∏—Ç–∏, —è–∫—â–æ –≤–∂–µ —î –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ —É—á–∞—Å–Ω–∏–∫–∏

### –ó–º—ñ–Ω–∞ `total_rounds`:
- ‚úÖ –¢—É—Ä–Ω—ñ—Ä –º–∞—î –±—É—Ç–∏ –≤ —Å—Ç–∞—Ç—É—Å—ñ `registration`
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–∞—É–Ω–¥—ñ–≤ –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 1 –¥–æ 10
- ‚úÖ –ú–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —Ñ–æ—Ä–º—É–ª—ñ –¥–ª—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É—á–∞—Å–Ω–∏–∫—ñ–≤

## üìç Endpoint

```
PUT /tournaments/{tournament_id}
```

## üìù –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤

### 1. –ó–º—ñ–Ω–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É—á–∞—Å–Ω–∏–∫—ñ–≤
```bash
curl -X PUT "http://localhost:8000/tournaments/1" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "total_participants": 32
  }'
```

### 2. –ó–º—ñ–Ω–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–∞—É–Ω–¥—ñ–≤
```bash
curl -X PUT "http://localhost:8000/tournaments/1" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "total_rounds": 5
  }'
```

### 3. –ó–º—ñ–Ω–∏—Ç–∏ –æ–±–∏–¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
```bash
curl -X PUT "http://localhost:8000/tournaments/1" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "total_participants": 64,
    "total_rounds": 6
  }'
```

### 4. –ó–º—ñ–Ω–∏—Ç–∏ —Ä–∞–∑–æ–º –∑ —ñ–Ω—à–∏–º–∏ –ø–æ–ª—è–º–∏
```bash
curl -X PUT "http://localhost:8000/tournaments/1" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–û–Ω–æ–≤–ª–µ–Ω–∏–π —Ç—É—Ä–Ω—ñ—Ä",
    "total_participants": 40,
    "total_rounds": 5,
    "registration_deadline": "2025-12-01T20:00:00"
  }'
```

## ‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∏

### 400 Bad Request - –¢—É—Ä–Ω—ñ—Ä –≤–∂–µ –ø–æ—á–∞–≤—Å—è
```json
{
  "detail": "Cannot change total_participants or total_rounds after tournament has started"
}
```
**–ü—Ä–∏—á–∏–Ω–∞:** –¢—É—Ä–Ω—ñ—Ä –Ω–µ –≤ —Å—Ç–∞—Ç—É—Å—ñ `registration`

### 400 Bad Request - –ó–∞–Ω–∞–¥—Ç–æ –º–∞–ª–æ –º—ñ—Å—Ü—å
```json
{
  "detail": "Cannot reduce capacity to 16. Already have 20 registered participants."
}
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞–º–∞–≥–∞—î—Ç–µ—Å—å –∑–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º—ñ—Å—Ü—å –Ω–∏–∂—á–µ –ø–æ—Ç–æ—á–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É—á–∞—Å–Ω–∏–∫—ñ–≤

### 422 Validation Error - –ù–µ –∫—Ä–∞—Ç–Ω–æ 8
```json
{
  "detail": [
    {
      "loc": ["body", "total_participants"],
      "msg": "Total participants must be divisible by 8",
      "type": "value_error"
    }
  ]
}
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ö—ñ–ª—å–∫—ñ—Å—Ç—å —É—á–∞—Å–Ω–∏–∫—ñ–≤ –Ω–µ –∫—Ä–∞—Ç–Ω–∞ 8

### 403 Forbidden - –ù–µ–º–∞—î –ø—Ä–∞–≤
```json
{
  "detail": "Only tournament creator can update"
}
```
**–ü—Ä–∏—á–∏–Ω–∞:** –í–∏ –Ω–µ —î —Å—Ç–≤–æ—Ä—é–≤–∞—á–µ–º —Ç—É—Ä–Ω—ñ—Ä—É

## üìä –ü–æ–≤–Ω–∞ —Å—Ö–µ–º–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

```typescript
{
  // –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
  "name"?: string,
  "description"?: string,
  
  // –î–∞—Ç–∏
  "registration_deadline"?: datetime,
  "start_date"?: datetime,
  
  // –°—Ç–∞—Ç—É—Å
  "status"?: "registration" | "active" | "finished" | "cancelled",
  
  // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç—É—Ä–Ω—ñ—Ä—É (—Ç—ñ–ª—å–∫–∏ –≤ —Å—Ç–∞—Ç—É—Å—ñ registration!)
  "total_participants"?: number,  // 8-128, –∫—Ä–∞—Ç–Ω–æ 8
  "total_rounds"?: number,        // 1-10
  
  // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
  "lobby_maker_priority_list"?: number[],
  "is_free"?: boolean,
  "prizes"?: Prize[],
  "first_round_strategy"?: "RANDOM" | "BALANCED" | "STRONG_VS_STRONG"
}
```

## üí° –ü–æ—Ä–∞–¥–∏

1. **–ó–±—ñ–ª—å—à—É–π—Ç–µ –ø–æ—Å—Ç—É–ø–æ–≤–æ**: –ö—Ä–∞—â–µ –∑–±—ñ–ª—å—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É—á–∞—Å–Ω–∏–∫—ñ–≤ –ø–æ—Å—Ç—É–ø–æ–≤–æ, –Ω—ñ–∂ –æ–¥—Ä–∞–∑—É –Ω–∞ –≤–µ–ª–∏–∫—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å
2. **–ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å**: –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å —Ç—É—Ä–Ω—ñ—Ä—É –ø–µ—Ä–µ–¥ —Å–ø—Ä–æ–±–æ—é –∑–º—ñ–Ω–∏
3. **–Ü–Ω—Ñ–æ—Ä–º—É–π—Ç–µ —É—á–∞—Å–Ω–∏–∫—ñ–≤**: –Ø–∫—â–æ –∑–º—ñ–Ω—é—î—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ø–æ–≤—ñ–¥–æ–º—Ç–µ —É—á–∞—Å–Ω–∏–∫—ñ–≤ –ø—Ä–æ –∑–º—ñ–Ω–∏
4. **–¢–µ—Å—Ç—É–π—Ç–µ**: –°–ø–æ—á–∞—Ç–∫—É –ø—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –∑–º—ñ–Ω–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ç—É—Ä–Ω—ñ—Ä—ñ

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –≥–Ω—É—á–∫–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç—É—Ä–Ω—ñ—Ä–∏ –¥–æ —ó—Ö –ø–æ—á–∞—Ç–∫—É! üéâ
